<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>JavaScript Closures</h2>

        <p>Counting with a local variable.</p>
        <p>Closures are used to retain value of data which is not gloval. Often when we call a
            function the value fo all variables inside the function is reset.</p>
        <p>A closure enables us to have private variables in a function which we can call over and over again,
            but not have to reset all variables.
        </p>
        <button type="button" onclick="myFunction()">Count!</button>

        <p id="demo">0</p>


        <script>

            // Initiate counter
            var counter = 0;

            // Function to increment counter
            function add() {
                counter += 1;
            }

            // Call add() 3 times
            add();
            add();
            add();
            // The counter should now be 3
            document.getElementById("demo").innerHTML = "The counter is: " + counter;

            // There is a problem with the solution above: Any code on the page can change the counter, without calling add().

            //The counter should be local to the add() function, to prevent other code from changing it:

            // Js function with closure
            var add = (function () {
                var counter = 0; // private var - like react states
                return function () { counter += 1; return counter; }
            })();

            function myFunction() {
                document.getElementById("demo").innerHTML = add();
            }
        </script>
</body>
</html>